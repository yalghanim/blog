<!DOCTYPE html>
{% load static %}
{% load comments %}
{% load crispy_forms_tags %}

<html>
<head>
	<title>One ID at a time (special URL that takes input from address)</title>
<link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.min.css' %}">
	<style>
	@import url('https://fonts.googleapis.com/css?family=Roboto');

	body {
		background-color: CadetBlue;
		font-family: Roboto;
	}

	</style>
</head>
<body>
<div class="container">
<h1>ID Page</h1>
<ul id="new">
Title: {{input.title}}<br>
Content: {{input.content}}<br>
Time Updated: {{input.updated}}<br>
Created: {{input.timestamp}}<br>
Image: <br>{% if not input.draft %}<img src="{{input.image.url}}" class="img-responsive"> {% endif %}
{% if input.draft %} DRAFT {% endif %}
</ul>
<button class="btn btn-default" onclick="ajax_like()">
<div id="likes">
<span id="likes_count">{{like_count}}</span>
<span class="glyphicon glyphicon-heart {% if liked %}text-danger{% endif %}" aria-hidden="true" id="heart" ></span>
</button>
<br><br>
<div id="comments">
{% include "comments.html" %}
</div>
<br><br>
<a href="{% url 'posts:list' %}" class="btn btn-default" role="button">Go Back to List</a>
</div>
<script>
	function ajax_like()
	{
		console.log("Like/Unlike clicked!");
		$.ajax({
			type: 'GET',
			url: "{% url 'posts:like_button' post_number=input.id %}",
			error: function(){
				console.log("noob")
			},
			success: function(data){
				$("#likes_count").text(data.like_count)
				if(data.action==="like")
				{
					$("#heart").addClass("text-danger");
				} else {
					$("#heart").removeClass("text-danger");
				}

			},
		})
	}
</script>
 
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<div class="embed-responsive embed-responsive-16by9">
  <iframe class="embed-responsive-item" src="https://www.youtube.com//embed/cpPG0bKHYKc"></iframe>
</div>
<script src="{% static 'js/jquery-3.2.1.min.js' %}"></script>
<script src="{% static 'js/bootstrap.min.js' %}"></script>
</body>
</html>